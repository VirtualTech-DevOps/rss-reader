+++
title = """Scan a music directory for all new albums in the last 10 days, select the ones you need a playlist of."""
date = 2024-11-10T09:00:54.000Z
tags = ["reddit","cli"]
+++
This was something that was missing from the tools that I currenly use, luckily with a bit of **fzf** and a single incantation, I had a terminal 'app' doing exactly what I wanted. It uses **ripgrep** and **fd** rather than grep and find respectively. Posting in case it is useful:

`#` **Find directories in music folder modified in last 240 hours**

`fd . '/path/to/music/' \`

`--changed-within "240h" \`

`--min-depth 2 \`

`-d 2 \`

`| \`

`#` **Remove any paths containing @ symbol**

`rg -v '@' \`

`| \`

`#` **Interactive fuzzy selection with multi-select enabled**

`fzf --multi \`

`| \`

`#` **For each selected directory, find MP3/FLAC files**

`xargs -I{} fd . "{}" \`

`-type f \`

`\( -iname "*.mp3" -o -iname "*.flac" \) \`

`-print0 \`

`| \`

`#` **Sort the null-terminated file list**

`sort -z \`

`| \`

`#` **Convert null bytes to proper newlines using sed**

`sed 's/\x0/\n/g' > /path/to/playlists/newmusic.m3u`

This assumes you have a neatly structured music library that goes {artist}{album}{tracks}.

Tested and working with ncmpcpp. Shared due to my perpetual amazement that you can do this stuff with linux.

submitted by [/u/edwardianpug](https://www.reddit.com/user/edwardianpug)  
[\[link\]](https://www.reddit.com/r/commandline/comments/1gnwljp/scan_a_music_directory_for_all_new_albums_in_the/) [\[comments\]](https://www.reddit.com/r/commandline/comments/1gnwljp/scan_a_music_directory_for_all_new_albums_in_the/)

[[source]](https://www.reddit.com/r/commandline/comments/1gnwljp/scan_a_music_directory_for_all_new_albums_in_the/)
