+++
title = """Pleasanterの通知機能を使いこなそう(メール編)"""
date = 2024-10-08T02:22:12.000Z
expiryDate = 2024-12-27T08:08:36.760Z
tags = ["vtj","devops"]
+++
これまで「パートナーになったので〜」シリーズで基本的なテーブル作成からスクリプト活用までの一連の流れを学んできました。

前回までのシリーズは一区切りにしまして、これからは気になった機能や最近触った機能などを中心にブログにまめていければと思っていますので、引き続き一緒にPleasanterを学んでいきましょう。

過去の連載：

[devops-blog.virtualtech.jp](https://devops-blog.virtualtech.jp/entry/20240930/1727658871)

[devops-blog.virtualtech.jp](https://devops-blog.virtualtech.jp/entry/20241002/1727830013)

[devops-blog.virtualtech.jp](https://devops-blog.virtualtech.jp/entry/20241004/1728006284)

今回の話
====

今回は、テーブル作成後の運用フェーズに入ってから活用すると便利そうな「通知機能」について学んで、使いこなせるようになってみましょう。

通知機能とは？
=======

メールまたはチャットなどに対して通知を飛ばす機能です。普段からあまり意識していないと思いますが、システムやサービスで変更や新規作成をした後にメールが飛んでくるのもがまさに通知です。

Pleasanterでは通知を画面上から設定するだけで飛ばすことができるため、定期的にテーブルを確認して追加や変更がないかを確認せずとも、メールやチャットの通知をきっかけに作業や手続きを進めることができるので、業務効率化に繋げやすいですね。

[pleasanter.org](https://pleasanter.org/ja/manual/table-management-notification)

事前準備
====

早速始めたいところですが、通知機能でメールを使用する際の注意点としてインフラでの設定が必要になります。

**メールサーバー(SMTP)**

メール機能を使用するためには、事前にメールサーバーの準備や設定ファイルの変更が必要です。使用するサーバーやサービスによって記述方法や必要な情報を見つけるのは非エンジニアの方にとっては慣れない作業で難しいポイントとなりやすいです。事前にPleasanterを担当している社内のエンジニアや弊社を含めたパートナー企業にご相談ください。もし、ご自身で設定してみたい方は公式ドキュメントを見ながら進めてみてください。

[プリザンターからメールを送信できるように設定する | Pleasanter](https://pleasanter.org/ja/manual/smtp-mail)

使い方
===

既に記録テーブルが作成されているところからのスタートとさせてください。`管理 > テーブルの管理 > 通知 > 新規作成`を開き、通知の作成画面を表示します。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/v/virtualtech/20241008/20241008112443.png)

今回使用している項目の入力例：

項目

説明

通知種別

メールやSlack、Teams、LINEなどから選択可能

`メール`

件名

メールの件名

`新しい図書が追加されました`

アドレス

メール送信するアドレス

(あとで詳しく)

通知タイミング

作成後や更新後などの通知タイミング

`作成後`のみ

変更を監視する項目

変更されたかどうかをチェックする項目を指定

既定値

一通りの項目が入力できたら`追加`ボタンを押します。

アドレスの指定方法
=========

初めてみた時にアドレスに指定できる内容は固定のメールアドレスのみと思ったのですが、ドキュメントを読んでみると色々なバリエーションで指定できるようです。

基本的な記述方法は、このようなフォーマットになっており、複数件まとめて書くときはカンマ(`,`)区切りにします。

example＠example.com, \[担当者\], \[内容\]

パターン

説明

設定例

メールアドレス

メーリングリストなどを直接指定

`example@example.com`

関係者

レコードの作成者、更新者、管理者、担当者のいずれかに該当するメールアドレスを指定

`[RelatedUsers]`

個別指定

レコードの作成者、更新者、管理者、担当者を指定

`[管理者]`、`[担当者]`など

ユーザID

ユーザに割り当てられているIDを指定

`[User1]`

組織ID

組織IDを指定。組織に所属しているユーザ全員に通知

`[Dept1]`

グループID

グループIDを指定。グループに所属しているユーザ全員に通知

`[Group1]`

ここに挙げていること以外にも分類項目を使って各レコードの編集項目から自由に組織/ユーザ/グループを変更できたりすることもできるようです。

もしかしたらどこかで読み落としているかもしれませんが、アクセス権が設定されているユーザー/組織/グループを対象に通知するという設定は今の所なさそう？でした。

ある程度のバリエーションは実現できそうなので、複雑なケースなど運用もできそうですね。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/v/virtualtech/20241008/20241008112446.png)

応用編: 分類項目を使った通知先指定
------------------

意外と使えるシーンが多そうなので、公式ドキュメントにもある`分類項目`を使った通知先の振り分け方法についてご紹介します。

今回の図書管理的なところで思いつきで作ってみたはいいものの、ストーリーには無理があったあったような気がしますが、実際の業務では他部門と連携するときに活用するとよさそうですね。

例えば、企業担当とユーザー担当など工程やビジネスモデル上で複数の担当者を指定したりする際にも便利に使えると思います。前に人材会社でお仕事をしていたことがあるので、色々と使えそうなシーンが頭に浮かびました。

余談はここまでにしておいて、実際に設定してみます。まずは、入力項目を用意します。

`管理 > テーブルの管理 > エディタ`にアクセスしてまだ使用していない`分類B`を有効化して詳細設定を開きます。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/v/virtualtech/20241008/20241008112450.png)

選択項目一覧に`[[Users]]`というおまじないみたいな文字を書くと、ユーザ一覧を取得します。似たような記述方法に`[[Users*]]`という表記がありますが、アクセス権限を考慮した一覧を取得するか、全ユーザを取得するかの違いです。ユースケースに応じて使い分けるとよさそうですね。

今回は、アクセス権限があるユーザのみにしておきたいので`[[Users]]`を指定しています。

他にも、`複数選択`にチェックを入れておくと、複数の承認者を指定できるようになります。実際に通知でメールが送られる際にはToで送られるようです。

`変更`ボタンを押して反映します。必要であれば、一覧表示にも表示できるように設定してください。

### 承認者の設定

入力項目の準備ができたら、承認者を設定します。テーブルの一覧から承認者を設定したレコードを選択して、新しく追加した承認者の項目から設定します。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/v/virtualtech/20241008/20241008112459.png)

### 通知設定

設定ができたら通知を登録します。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/v/virtualtech/20241008/20241008112453.png)

アドレスのところに先ほど追加した`[承認者]`を指定します。これで`[承認者]`で選択した人が通知対象に指定されます。変更の対象を監視で`貸出状況`だけ変わるようにしておくと、他の項目が変更されるたびに通知されることを避けることもできます。

画像の通りに内容を変更ができたら、ボタンを押して登録したら、次へ進みます。

また編集画面に戻り`貸出状況`を`申請中`に変更するか、`借りる`のプロセスをボタンを押して実行します。するとステータスが更新されて、通知がトリガーされます。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/v/virtualtech/20241008/20241008112456.png)

みたいにメールが送られてきて、気づくきっかけになりますね。

おわりに
====

画面上で手軽にメール送信する方法ではバリエーションが限られてはいますが、ある程度のシーンでは活用できそうですね。

また、実現が難しかったとしてもメール送信に限れば、スクリプトを駆使することでより複雑な処理を実行させることもできそうですね。

実際の業務では、メールやチャットで相手にお知らせしたりすることも多いともいます。この部分だけでも自動化されることで心理的負担の軽減や業務効率化が進みそうですね。

[[source]](https://devops-blog.virtualtech.jp/entry/20241008/1728354132)
